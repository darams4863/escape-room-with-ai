{
    "id": null,
    "title": "Escape Room With AI Service Dashboard",
    "uid": "escape-room-with-ai-service",
    "timezone": "browser",
    "schemaVersion": 38,
    "version": 2,
    "refresh": "10s",
    "panels": [
      {
        "type": "stat",
            "title": "üî¢ Ï¥ù Ï±ÑÌåÖ Î©îÏãúÏßÄ",
            "targets": [
                {
                    "expr": "sum(chat_messages_total) or vector(0)",
                    "refId": "A"
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 5,
                "x": 0,
                "y": 0
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 100},
                            {"color": "red", "value": 500}
                        ]
                    },
                    "nullValueMode": "null as zero"
                }
            }
        },
        {
            "type": "stat",
            "title": "üë• ÏÇ¨Ïö©Ïûê Îì±Î°ù (Ï¥ùÌï©)",
            "targets": [
                {
                    "expr": "sum(user_registrations_total) or vector(0)",
                    "refId": "A"
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 5,
                "x": 5,
                "y": 0
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 50},
                            {"color": "red", "value": 200}
                        ]
                    },
                    "nullValueMode": "null as zero"
                }
            }
        },
        {
            "type": "stat",
            "title": "üîë ÏÇ¨Ïö©Ïûê Î°úÍ∑∏Ïù∏",
        "targets": [
          {
                    "expr": "sum(user_logins_total) or vector(0)",
            "refId": "A"
          }
        ],
            "gridPos": {
                "h": 4,
                "w": 5,
                "x": 10,
                "y": 0
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 100},
                            {"color": "red", "value": 500}
                        ]
                    },
                    "nullValueMode": "null as zero"
                }
            }
        },
        {
            "type": "stat",
            "title": "üí∞ Ï¥ù ÎπÑÏö©",
            "targets": [
                {
                    "expr": "sum(openai_cost_total_usd_total) or vector(0)",
                    "refId": "A",
                    "legendFormat": "${{value}}",
                    "color": {
                        "mode": "fixed",
                        "fixedColor": "green"
                    }
                },
                {
                    "expr": "sum(openai_cost_total_usd_total * 1500) or vector(0)",
                    "refId": "B",
                    "legendFormat": "‚Ç©{{value}}",
                    "color": {
                        "mode": "fixed",
                        "fixedColor": "blue"
                    }
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 5,
                "x": 15,
                "y": 0
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "currencyUSD",
                    "decimals": 6,
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 0.01},
                            {"color": "red", "value": 0.1}
                        ]
                    },
                    "nullValueMode": "null as zero"
                }
            },
            "options": {
                "colorMode": "value",
                "graphMode": "area",
                "justifyMode": "auto",
                "orientation": "auto",
                "reduceOptions": {
                    "values": false,
                    "calcs": ["lastNotNull"],
                    "fields": ""
                },
                "textMode": "auto",
                "wideLayout": true
            }
      },
      {
        "type": "stat",
            "title": "üìä ÏãúÍ∞Ñ Î≤îÏúÑÎ≥Ñ Îì±Î°ù Ïàò",
            "targets": [
                {
                    "expr": "sum(increase(user_registrations_total[$__range])) or vector(0)",
                    "refId": "A"
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 4,
                "x": 20,
                "y": 0
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 10},
                            {"color": "red", "value": 50}
                        ]
                    },
                    "nullValueMode": "null as zero"
                }
            }
        },
        {
            "type": "timeseries",
            "title": "üìà Ï±ÑÌåÖ Î©îÏãúÏßÄ Ìä∏ÎûòÌîΩ",
            "targets": [
                {
                    "expr": "sum by (chat_type) (rate(chat_messages_total[5m])) or vector(0)",
                    "refId": "A",
                    "legendFormat": "{{chat_type}}"
                }
            ],
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 4
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "reqps",
                    "color": {
                        "mode": "palette-classic"
                    },
                    "nullValueMode": "null as zero"
                }
            }
        },
        {
            "type": "timeseries",
            "title": "‚ö° Ï±ÑÌåÖ ÏùëÎãµ ÏãúÍ∞Ñ",
            "targets": [
                {
                    "expr": "histogram_quantile(0.90, sum by (le) (rate(chat_response_time_seconds_bucket[5m]))) or vector(0)",
                    "refId": "A",
                    "legendFormat": "üéØ Î™©Ìëú ÏÜçÎèÑ",
                    "color": {
                        "mode": "fixed",
                        "fixedColor": "blue"
                    }
                },
                {
                    "expr": "histogram_quantile(0.50, sum by (le) (rate(chat_response_time_seconds_bucket[5m]))) or vector(0)",
                    "refId": "B",
                    "legendFormat": "üìä ÏùºÎ∞òÏ†ÅÏù∏ ÏÜçÎèÑ",
                    "color": {
                        "mode": "fixed",
                        "fixedColor": "green"
                    }
                },
                {
                    "expr": "rate(chat_response_time_seconds_sum[5m]) / rate(chat_response_time_seconds_count[5m]) or vector(0)",
                    "refId": "C",
                    "legendFormat": "‚ö° ÌèâÍ∑† ÏÜçÎèÑ",
                    "color": {
                        "mode": "fixed",
                        "fixedColor": "yellow"
                    }
                },
                {
                    "expr": "histogram_quantile(0.99, sum by (le) (rate(chat_response_time_seconds_bucket[5m]))) or vector(0)",
                    "refId": "D",
                    "legendFormat": "‚ö†Ô∏è ÏµúÏïÖÏùò Í≤ΩÏö∞",
                    "color": {
                        "mode": "fixed",
                        "fixedColor": "red"
                    }
                }
            ],
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 4
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "s",
                    "min": 0,
                    "max": 20,
                    "color": {
                        "mode": "palette-classic"
                    },
                    "nullValueMode": "null as zero"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üéØ Î™©Ìëú ÏÜçÎèÑ"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "thresholds"
                                }
                            },
                            {
                                "id": "thresholds",
                                "value": {
                                    "steps": [
                                        {"color": "green", "value": null},
                                        {"color": "blue", "value": 0.5},
                                        {"color": "yellow", "value": 1},
                                        {"color": "orange", "value": 1.5},
                                        {"color": "red", "value": 2}
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "üìä ÏùºÎ∞òÏ†ÅÏù∏ ÏÜçÎèÑ"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "thresholds"
                                }
                            },
                            {
                                "id": "thresholds",
                                "value": {
                                    "steps": [
                                        {"color": "green", "value": null},
                                        {"color": "blue", "value": 0.5},
                                        {"color": "yellow", "value": 1},
                                        {"color": "orange", "value": 1.5},
                                        {"color": "red", "value": 2}
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "‚ö° ÌèâÍ∑† ÏÜçÎèÑ"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "thresholds"
                                }
                            },
                            {
                                "id": "thresholds",
                                "value": {
                                    "steps": [
                                        {"color": "green", "value": null},
                                        {"color": "blue", "value": 0.5},
                                        {"color": "yellow", "value": 1},
                                        {"color": "orange", "value": 1.5},
                                        {"color": "red", "value": 2}
                                    ]
                                }
                            }
                        ]
                    },
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "‚ö†Ô∏è ÏµúÏïÖÏùò Í≤ΩÏö∞"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "mode": "thresholds"
                                }
                            },
                            {
                                "id": "thresholds",
                                "value": {
                                    "steps": [
                                        {"color": "green", "value": null},
                                        {"color": "blue", "value": 0.5},
                                        {"color": "yellow", "value": 1},
                                        {"color": "orange", "value": 1.5},
                                        {"color": "red", "value": 2}
                                    ]
                                }
                            }
                        ]
                    }
                ]
            }
        },
        {
            "type": "barchart",
            "title": "ü§ñ Î™®Îç∏Î≥Ñ API Ìò∏Ï∂ú",
            "targets": [
                {
                    "expr": "sum by (model) (rate(api_calls_total[5m])) or vector(0)",
                    "refId": "A",
                    "legendFormat": "{{model}}"
                }
            ],
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 12
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "reqps",
                    "color": {
                        "mode": "palette-classic"
                    },
                    "nullValueMode": "null as zero"
                }
            },
            "options": {
                "orientation": "horizontal",
                "xField": "model",
                "yField": "Value"
            }
        },
        {
            "type": "piechart",
            "title": "üí∞ Î™®Îç∏Î≥Ñ ÎπÑÏö© (USD)",
            "targets": [
                {
                    "expr": "sum by (model) (openai_cost_total_usd_total) or vector(0)",
                    "refId": "A",
                    "legendFormat": "{{model}} - ${{value}}",
                    "color": {
                        "mode": "fixed",
                        "fixedColor": "green"
                    }
                }
            ],
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 12
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "currencyUSD",
                    "custom": {
                        "displayMode": "auto"
                    },
                    "mappings": [],
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 0.01},
                            {"color": "red", "value": 0.1}

                        ]
                    },
                    "color": {
                        "mode": "palette-classic"
                    },
                    "nullValueMode": "null as zero"
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byName",
                            "options": "gpt-4o-mini"
                        },
                        "properties": [
                            {
                                "id": "custom.displayMode",
                                "value": "auto"
                            },
                            {
                                "id": "custom.unit",
                                "value": "currencyUSD"
                            },
                            {
                                "id": "mappings",
                                "value": [
                                    {
                                        "type": "value",
                                        "value": "0",
                                        "text": "$0 (‚Ç©0)"
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "values": ["value", "percent"]
                },
                "pieType": "pie",
                "tooltip": {
                    "mode": "single"
                }
            }
        },
        {
            "type": "barchart",
            "title": "üîç RAG ÏÇ¨Ïö©Î•†",
        "targets": [
          {
                    "expr": "sum by (search_method) (rate(rag_usage_total[5m])) or vector(0)",
                    "refId": "A",
                    "legendFormat": "{{search_method}}"
                }
            ],
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 20
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "reqps",
                    "color": {
                        "mode": "palette-classic"
                    },
                    "nullValueMode": "null as zero"
                }
            },
            "options": {
                "orientation": "horizontal",
                "xField": "search_method",
                "yField": "Value"
            }
        },
        {
            "type": "text",
            "title": "‚ùå API ÏóêÎü¨ Î°úÍ∑∏",
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 20
            },
            "options": {
                "mode": "html",
                "content": "<div style='padding: 10px; font-family: monospace; background: #1e1e1e; color: #ffffff; height: 100%; overflow-y: auto;'><h3 style='color: #ff6b6b; margin-bottom: 10px;'>üìã ÏµúÍ∑º ÏóêÎü¨ Î°úÍ∑∏</h3><div id='error-logs' style='white-space: pre-wrap; line-height: 1.4;'>Î°úÎî© Ï§ë...</div></div><script>fetch('/api/logs/errors').then(r => r.text()).then(data => { document.getElementById('error-logs').textContent = data; });</script>"
            }
        },
        {
            "type": "timeseries",
            "title": "üíæ Ïï± Î©îÎ™®Î¶¨ ÏÇ¨Ïö©Îüâ",
        "targets": [
          {
                    "expr": "memory_usage_bytes / (1024 * 1024)",
                    "refId": "A",
                    "legendFormat": "App Memory (MB)"
                }
            ],
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 28
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 4},
                            {"color": "red", "value": 8}
                        ]
                    },
                    "mappings": [],
                    "max": 1000,
                    "min": 0
                }
            }
      },
      {
        "type": "gauge",
            "title": "üñ•Ô∏è Ïï± CPU ÏÇ¨Ïö©Î•†",
        "targets": [
          {
            "expr": "cpu_usage_percent",
                    "refId": "A",
                    "legendFormat": "App CPU %"
                }
            ],
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 12,
                "y": 28
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "percent",
                    "min": 0,
                    "max": 100,
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "green", "value": null},
                            {"color": "yellow", "value": 40},
                            {"color": "red", "value": 60}
                        ]
                    }
                }
            },
            "options": {
                "orientation": "auto",
                "reduceOptions": {
                    "values": false,
                    "calcs": ["lastNotNull"],
                    "fields": ""
                },
                "showThresholdLabels": false,
                "showThresholdMarkers": true
            }
        },
        {
            "type": "stat",
            "title": "üéØ ÏÑ∏ÏÖò ÌíàÏßà Ï†êÏàò",
            "targets": [
                {
                    "expr": "avg(session_quality_score) or vector(0)",
                    "refId": "A"
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 6,
                "x": 0,
                "y": 36
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "red", "value": null},
                            {"color": "yellow", "value": 0.5},
                            {"color": "green", "value": 0.8}
                        ]
                    },
                    "unit": "percentunit",
                    "nullValueMode": "null as zero"
                }
            }
        },
        {
            "type": "stat",
            "title": "üìà Ï∂îÏ≤ú ÏÑ±Í≥µÎ•†",
            "targets": [
                {
                    "expr": "avg(recommendation_success_rate) or vector(0)",
                    "refId": "A"
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 6,
                "x": 6,
                "y": 36
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "red", "value": null},
                            {"color": "yellow", "value": 0.6},
                            {"color": "green", "value": 0.8}
                        ]
                    },
                    "unit": "percentunit",
                    "nullValueMode": "null as zero"
                }
            }
        },
        {
            "type": "stat",
            "title": "üòä ÏÇ¨Ïö©Ïûê ÎßåÏ°±ÎèÑ",
        "targets": [
          {
                    "expr": "avg(user_satisfaction_score) or vector(0)",
                    "refId": "A"
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 6,
                "x": 12,
                "y": 36
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "red", "value": null},
                            {"color": "yellow", "value": 0.5},
                            {"color": "green", "value": 0.8}
                        ]
                    },
                    "unit": "percentunit",
                    "nullValueMode": "null as zero"
                }
            }
      },
      {
        "type": "stat",
            "title": "‚úÖ ÏÑ∏ÏÖò ÏôÑÎ£åÏú®",
        "targets": [
          {
                    "expr": "avg(session_completion_rate) or vector(0)",
                    "refId": "A"
                }
            ],
            "gridPos": {
                "h": 4,
                "w": 6,
                "x": 18,
                "y": 36
            },
            "fieldConfig": {
                "defaults": {
                    "color": {
                        "mode": "thresholds"
                    },
                    "thresholds": {
                        "steps": [
                            {"color": "red", "value": null},
                            {"color": "yellow", "value": 0.6},
                            {"color": "green", "value": 0.8}
                        ]
                    },
                    "unit": "percentunit",
                    "nullValueMode": "null as zero"
                }
            }
        }
    ],
    "templating": {
        "list": []
    },
    "annotations": {
        "list": []
    },
    "time": {
        "from": "now-24h",
        "to": "now"
    },
    "timepicker": {
        "refresh_intervals": [
            "5s",
            "10s",
            "30s",
            "1m",
            "5m",
            "15m",
            "30m",
            "1h",
            "2h",
            "1d"
        ],
        "time_options": [
            "5m",
            "15m",
            "1h",
            "6h",
            "12h",
            "24h",
            "2d",
            "7d",
            "30d"
        ]
    }
  }